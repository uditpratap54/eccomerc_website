<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>City Directory</title>
    <link rel="stylesheet" href="/css/styles.css" />
  </head>
  <body>
    <%- include('partials/navbar') %>
    <main class="container">
      <div class="layout-grid">
        <div class="main-col">
          <section class="hero hero-illustrated animate-in">
            <div class="hero-content">
              <h1>Find City-wise Kirana & General Stores</h1>
              <p class="sub">Products dekho, shop details pao â€” address, phone, directions. Kharidne ke liye seedha shop visit karo.</p>
              <div class="badges">
                <span class="badge">City filter</span>
                <span class="badge">Product search</span>
                <span class="badge">Shop details</span>
              </div>
              <div class="cta-row">
                <a class="btn" href="#search">Start Searching</a>
                <a class="btn secondary" href="/cities/new">Add City</a>
              </div>
            </div>
          </section>

          <section id="search" class="animate-in" style="margin-top:16px;">
            <form action="/search" method="get" class="search-form card">
              <div class="form-row">
                <label>City</label>
                <select name="city" required>
                  <% cities.forEach(function(city){ %>
                    <option value="<%= city %>"><%= city %></option>
                  <% }) %>
                </select>
              </div>
              <div class="form-row">
                <label>Keyword</label>
                <input type="text" name="q" placeholder="e.g. atta, biscuit, soap" />
              </div>
              <div class="form-row">
                <label>Category</label>
                <select name="category">
                  <option value="">All</option>
                  <option value="kirana">Kirana</option>
                  <option value="snacks">Snacks</option>
                  <option value="toiletries">Toiletries</option>
                  <option value="beverages">Beverages</option>
                  <option value="dairy">Dairy</option>
                  <option value="household">Household</option>
                </select>
              </div>
              <div class="form-row">
                <label>Price Range</label>
                <input type="number" name="minPrice" placeholder="Min" />
                <input type="number" name="maxPrice" placeholder="Max" />
              </div>
              <button type="submit" class="btn">Search</button>
            </form>
          </section>

          <section class="features-grid animate-in">
            <div class="feature-card card">
              <h3>Filter by City</h3>
              <p class="muted">Apni city select karo aur relevant shops dekho.</p>
            </div>
            <div class="feature-card card">
              <h3>Smart Product Search</h3>
              <p class="muted">Keyword, category aur price range se search karo.</p>
            </div>
            <div class="feature-card card">
              <h3>Shop Details</h3>
              <p class="muted">Address, phone aur directions ek jagah.</p>
            </div>
          </section>

          <!-- India Map section (default) -->
          <section class="card animate-in" style="margin-bottom:20px;">
            <h3 style="margin-bottom:8px;">India Map</h3>
            <div style="border-radius:8px; overflow:hidden;">
              <iframe
                src="https://www.google.com/maps?q=India&output=embed"
                width="100%"
                height="300"
                style="border:0;"
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade">
              </iframe>
            </div>
            <div class="actions" style="margin-top:8px;">
              <a class="btn secondary" href="https://www.google.com/maps/search/?api=1&query=India" target="_blank">Open in Maps</a>
            </div>
          </section>
        </div>

        <aside class="side-col">
          <div class="card side-card animate-in">
            <h3>Quick Actions</h3>
            <div class="actions" style="flex-direction:column; align-items:stretch;">
              <a class="btn" href="/search">Open Search</a>
              <a class="btn secondary" href="/cities/new">Add City</a>
              <% if (currentUser) { %>
                <a class="btn secondary" href="/account">Account</a>
              <% } else { %>
                <a class="btn secondary" href="/login">Login</a>
              <% } %>
            </div>
          </div>
          <div class="card side-card animate-in">
            <h3>Quick Search</h3>
            <form action="/search" method="get" class="form-grid">
              <select name="city" required>
                <% cities.forEach(function(city){ %>
                  <option value="<%= city %>"><%= city %></option>
                <% }) %>
              </select>
              <input type="text" name="q" placeholder="Keyword" />
              <button type="submit" class="btn">Search</button>
            </form>
          </div>
        </aside>
      </div>
    </main>
    <%- include('partials/footer') %>
  </body>
</html>